<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#ffffff">
  <link rel="manifest" href="manifest.json">
  <title>ë””í”¼ê°¤ í”¼ì¶œ</title>
  <style>
    body {
      margin: 0;
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #ffffff;
      color: #222;
    }
    header {
      background-color: #f1f3f5;
      padding: 1rem;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
    }
    .date-display {
      font-size: 1rem;
      text-align: center;
      margin-top: 0.25rem;
      color: #555;
    }
    main {
      padding: 1rem;
    }
    .button {
      background-color: #4f46e5;
      color: white;
      padding: 0.75rem 1rem;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      margin: 0.5rem 0;
    }
    .list {
      margin-top: 1.5rem;
    }
    .list-item {
      padding: 0.75rem;
      margin-bottom: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }
    .record-section {
      display: none;
      margin-top: 1.5rem;
    }
    input, textarea {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }
    .history-section {
      margin-top: 2rem;
    }
    .history-entry {
      background-color: #f9fafb;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 0.75rem;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
  <header>
    ë””í”¼ê°¤ í”¼ì¶œ
    <div class="date-display" id="todayDate"></div>
  </header>
  <main>
    <button class="button" onclick="startPractice()">ğŸµ ì—°ìŠµ ì‹œì‘ (íƒ€ì´ë¨¸)</button>

    <div class="list">
      <div class="list-item" onclick="openRecord('Hanon 39')">
        Hanon 39 <span>â–¶</span>
      </div>
      <div class="list-item" onclick="openRecord('Czerny 54')">
        Czerny 54 <span>â–¶</span>
      </div>
    </div>

    <div class="record-section" id="recordSection">
      <h3 id="recordTitle">ê¸°ë¡ ì…ë ¥</h3>
      <label>ì—°ìŠµ ì‹œê°„ (ë¶„)</label>
      <input type="number" id="practiceTime" placeholder="ì˜ˆ: 30">

      <label>ë©”ëª¨</label>
      <textarea id="practiceNote" rows="3" placeholder="ì—°ìŠµ ì¤‘ ëŠë‚€ ì ì„ ì ì–´ë³´ì„¸ìš”"></textarea>

      <label>ë§í¬</label>
      <input type="url" id="practiceLink" placeholder="ìœ íŠœë¸Œ ë§í¬ ë“±">

      <button class="button" onclick="saveRecord()">ì €ì¥</button>
    </div>

    <div class="history-section" id="historySection">
      <h3>ğŸ“œ ì—°ìŠµ íˆìŠ¤í† ë¦¬</h3>
      <div id="historyList"></div>
    </div>
  </main>

  <script>
    let currentPiece = '';

    function openRecord(title) {
      currentPiece = title;
      document.getElementById('recordSection').style.display = 'block';
      document.getElementById('recordTitle').innerText = `[${title}] ì—°ìŠµ ê¸°ë¡ ì…ë ¥`;
    }

    function saveRecord() {
      const time = document.getElementById('practiceTime').value;
      const note = document.getElementById('practiceNote').value;
      const link = document.getElementById('practiceLink').value;
      const date = new Date().toISOString().split('T')[0];

      const record = {
        piece: currentPiece,
        date,
        time,
        note,
        link
      };

      const logs = JSON.parse(localStorage.getItem('practiceLogs') || '[]');
      logs.push(record);
      localStorage.setItem('practiceLogs', JSON.stringify(logs));

      alert(`ì €ì¥ ì™„ë£Œ!\n\nê³¡: ${currentPiece}\nì‹œê°„: ${time}ë¶„\në‚ ì§œ: ${date}`);

      document.getElementById('practiceTime').value = '';
      document.getElementById('practiceNote').value = '';
      document.getElementById('practiceLink').value = '';
      document.getElementById('recordSection').style.display = 'none';

      renderHistory();
    }

    function startPractice() {
      alert("íƒ€ì´ë¨¸ ê¸°ëŠ¥ì€ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ êµ¬í˜„ë©ë‹ˆë‹¤!");
    }

    function renderHistory() {
      const logs = JSON.parse(localStorage.getItem('practiceLogs') || '[]');
      const container = document.getElementById('historyList');
      container.innerHTML = '';
      logs.slice().reverse().forEach(log => {
        const div = document.createElement('div');
        div.className = 'history-entry';
        div.innerHTML = `<strong>${log.date}</strong> Â· <em>${log.piece}</em><br>â± ${log.time}ë¶„<br>${log.note}<br><a href="${log.link}" target="_blank">${log.link}</a>`;
        container.appendChild(div);
      });
    }

    function showTodayDate() {
      const today = new Date();
      const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
      document.getElementById('todayDate').innerText = today.toLocaleDateString('ko-KR', options);
    }

    showTodayDate();
    renderHistory();
  </script>
</body>
</html>
